import{W as e,S as n,C as t,P as o,O as s,V as a,H as i,a as d,B as w,L as c,b as r,c as h,M as u,D as l,d as p,G as m,e as f}from"./vendor.386f6627.js";const g=new e({antialias:!0,canvas:document.querySelector("#bg")});g.setPixelRatio(window.devicePixelRatio),g.setSize(window.innerWidth,window.innerHeight);const v=new n;v.background=new t(16777215);const S=new o(75,window.innerWidth/window.innerHeight,.1,5e4);S.position.set(80,70,170);const M=new s(S,g.domElement);M.target=new a(80,0,50);const E=new i(16772785,526368,2),b=new d(16755036,4);b.castShadow=!0,b.shadow.bias=-1e-4,b.shadow.mapSize.width=4096,b.shadow.mapSize.height=4096,v.add(E,b);const y=[];y.push(new a(0,0,0)),y.push(new a(150,0,0)),y.push(new a(150,0,30)),y.push(new a(0,0,30)),y.push(new a(0,0,60)),y.push(new a(150,0,60)),y.push(new a(150,0,90)),y.push(new a(0,0,90)),y.push(new a(0,0,0)),y.push(new a(30,0,0)),y.push(new a(30,0,90)),y.push(new a(60,0,90)),y.push(new a(60,0,0)),y.push(new a(90,0,0)),y.push(new a(90,0,90)),y.push(new a(120,0,90)),y.push(new a(120,0,0)),y.push(new a(150,0,0)),y.push(new a(150,0,90));const L=new r((new w).setFromPoints(y),new c({color:16777215,linewidth:100}));v.add(L);const P=new h(210,150),q=new u({color:2236962,side:l}),x=new p(P,q);x.rotation.x=-Math.PI/2,x.position.set(75,-.1,45),v.add(x);const O=(e,n)=>{const t=new f(2.5,2.5,1.8,32),o=new f(1.5,1.5,1.8,32),s=new u({color:n}),a=new p(t,s),i=new p(o,s);a.position.set(e[0],e[1]+1.8,e[2]),i.position.set(e[0],e[1],e[2]),v.add(a,i)};!function(){const e=[];for(;e.length<5;){const n=[30*Math.floor(5*Math.random()),0,30*Math.floor(4*Math.random())];let t=!1;const o=JSON.stringify(e),s=JSON.stringify(n);-1!=o.indexOf(s)&&(t=!0),t||n==[0,0,0]||e.push(n)}for(let n=0;n<5;n++)O(e[n],16731469)}();const k=new m;let W,z=[0,0],B=-Math.PI/2,C=[0,0,0,0];k.load("public/car/scene.gltf",(e=>{W=e.scene,W.rotation.y=B,W.position.set(0,1.6,0),W.scale.set(.03,.03,.03),v.add(W)})),function e(){requestAnimationFrame(e),g.render(v,S),M.update(),C[0]?(z[0]+=.3*Math.cos(B),z[1]-=.3*Math.sin(B)):C[1]?(z[0]-=.3*Math.cos(B),z[1]+=.3*Math.sin(B)):C[2]?B+=.02:C[3]&&(B-=.02),W&&(W.position.set(z[0],1.6,z[1]),W.rotation.y=B)}();const H={forward:[1,0,0,0],backward:[0,1,0,0],left:[0,0,1,0],right:[0,0,0,1]},I=document.querySelectorAll(".inputButton");let N;function A(e){null!=N?N.send(e):console.log("Not connected to the PICO")}I.forEach((e=>{e.addEventListener("mousedown",(()=>{const n=H[e.id];C=n,A(e.id)}))})),I.forEach((e=>{e.addEventListener("mouseup",(()=>{C=[0,0,0,0],A("stop")}))})),document.querySelector("#status").textContent;document.querySelector("#connectButton").addEventListener("mousedown",(()=>{N=new WebSocket("ws://192.168.4.1:80/connect-websocket"),console.log(N),N.addEventListener("open",(e=>{})),N.addEventListener("close",(e=>{N=void 0})),N.addEventListener("message",(e=>{console.log(e.data)})),N.addEventListener("error",(e=>{N=void 0}))}));
